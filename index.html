<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boda | Nicole Stefanie & Javier Adrián – 15 Mayo 2026</title>
  <meta name="description" content="Invitación de boda de Nicole Stefanie Benalcazar García y Javier Adrián Tobar Hanze – 15/05/2026" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500;700&family=Great+Vibes&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Paleta (vino / rosa / verde / tinta / papel) */
      --accent:#8B1E2D;
      --accent-2:#E6B8B8;
      --leaf:#386641;
      --ink:#1F2937;
      --paper:#FAF7F2;
      --shadow: 0 10px 24px rgba(0,0,0,.12);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--paper);color:var(--ink);font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Apple Color Emoji","Segoe UI Emoji";scroll-behavior:smooth}
    a{color:var(--accent)}
    .container{max-width:1120px;margin:auto;padding:22px}

    /* HERO */
    header.hero{position:relative;overflow:hidden;border-radius:var(--radius);box-shadow:var(--shadow);background:#fff}
    .hero-grid{display:grid;grid-template-columns:1.15fr 1fr}
    .hero-img{min-height:480px;background:linear-gradient(135deg,#f8e9ec,#f4efe9)}
    .hero-content{padding:30px}
    .names{font-family:"Playfair Display",serif;font-weight:700;letter-spacing:.02em;font-size:clamp(28px,4vw,44px)}
    .amp{font-family:"Great Vibes",cursive;color:var(--accent);font-size:clamp(36px,6vw,64px);line-height:.9;display:inline-block;margin:0 .25em}
    .date{margin-top:8px;font-weight:700;color:var(--accent);letter-spacing:.18em}
    .subtitle{margin:0;color:#6b7280}

    /* Countdown */
    .countdown{display:flex;gap:12px;margin-top:18px;flex-wrap:wrap}
    .pill{flex:1 1 110px;text-align:center;background:var(--paper);border:1px solid #ece7df;border-radius:14px;padding:12px 8px}
    .pill b{display:block;font-size:22px}

    /* Secciones */
    .section{margin:36px 0}
    .card{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);padding:22px}
    .two-col{display:grid;gap:18px;grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
    .title{font-family:"Playfair Display",serif;font-weight:700;font-size:26px;margin:0 0 8px}
    .center{display:flex;justify-content:center}

    /* Botones */
    .btn{display:inline-block;background:var(--accent);color:#fff;border:none;border-radius:12px;padding:12px 18px;font-weight:700;cursor:pointer;text-decoration:none}
    .btn.ghost{background:#fff;color:var(--accent);border:2px solid var(--accent)}
    .btn.block{display:block;width:100%}

    /* Línea de tiempo */
    .timeline{position:relative;margin-left:14px}
    .timeline::before{content:"";position:absolute;left:8px;top:0;bottom:0;width:2px;background:linear-gradient(180deg,var(--accent),transparent)}
    .t-item{position:relative;padding-left:28px;margin:16px 0}
    .t-dot{position:absolute;left:0;top:4px;width:16px;height:16px;border-radius:50%;background:var(--accent)}

    /* Formulario */
    form label{display:block;font-weight:700;margin:12px 0 6px}
    input,select,textarea{width:100%;border:1px solid #e5e7eb;border-radius:10px;padding:12px;background:#fff}
    textarea{min-height:110px}
    .ok{color:#065f46;padding:12px 14px;background:#ecfdf5;border:1px solid #a7f3d0;border-radius:12px}
    .err{color:#9b1c1c;padding:12px 14px;background:#fef2f2;border:1px solid #fecaca;border-radius:12px}

    /* Modal simple */
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;padding:20px;z-index:50}
    .modal.open{display:flex}
    .modal-card{background:#fff;max-width:760px;width:100%;border-radius:16px;box-shadow:var(--shadow);padding:22px}
    .modal-head{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
    .modal-title{font-family:"Playfair Display",serif;font-size:22px;font-weight:700}
    .modal-close{background:transparent;border:0;font-size:22px;cursor:pointer;color:#6b7280}
    .gift-list{display:grid;gap:12px}
    .gift-item{border:1px solid #eee;border-radius:12px;padding:12px 14px;display:flex;justify-content:space-between;align-items:center}
    .gift-item small{color:#6b7280}

    /* Imagen banner */
    .banner{width:100%;display:block;border-radius:18px;box-shadow:var(--shadow)}

    /* Animaciones scroll */
    .reveal{opacity:0;transform:translateY(22px);transition:opacity .8s ease, transform .8s ease}
    .reveal.visible{opacity:1;transform:translateY(0)}
    .delay-1{transition-delay:.08s}
    .delay-2{transition-delay:.16s}
    .delay-3{transition-delay:.24s}

    /* Oculto */
    .hidden{display:none}

    /* Botón Música */
    .music-btn{position:fixed;right:16px;bottom:16px;background:#fff;border:2px solid var(--accent);color:var(--accent);border-radius:999px;padding:10px 14px;box-shadow:var(--shadow);font-weight:700}
    .music-btn.playing{background:var(--accent);color:#fff}

    footer{margin:40px 0 28px;text-align:center;color:#6b7280}

    @media (max-width:940px){
      .hero-grid{grid-template-columns:1fr}
      .hero-img{min-height:360px}
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- HERO -->
    <header class="hero reveal">
      <div class="hero-grid">
        <div class="hero-img" aria-label="Fondo artístico"></div>
        <div class="hero-content">
          <p class="subtitle" id="greeting">Queridos invitados</p>
          <h1 class="names">Nicole Stefanie <span class="amp">&</span> Javier Adrián</h1>
          <p class="subtitle">¡Nos casamos! Acompáñanos a celebrar nuestro amor.</p>
          <p class="date">15 · MAYO · 2026</p>

          <!-- Countdown -->
          <div class="countdown">
            <div class="pill"><b id="dLeft">0</b><small>DÍAS</small></div>
            <div class="pill"><b id="hLeft">0</b><small>HORAS</small></div>
            <div class="pill"><b id="mLeft">0</b><small>MIN</small></div>
            <div class="pill"><b id="sLeft">0</b><small>SEG</small></div>
          </div>

          <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
            <a class="btn" id="addCalendar" href="#">Agregar al calendario</a>
            <a class="btn ghost" href="#confirmar">Confirmar asistencia</a>
          </div>
        </div>
      </div>
    </header>

    <!-- FOTO BANNER -->
    <section class="section reveal">
      <!-- Coloca tu imagen en /photos/portada.jpg -->
      <img class="banner" src="./photos/portada.jpg" alt="Nicole & Javier" />
    </section>

    <!-- CEREMONIA / RECEPCIÓN -->
    <section class="section">
      <div class="two-col">
        <article class="card reveal delay-1">
          <h2 class="title">Ceremonia</h2>
          <p class="subtitle">16:00 · Iglesia Casa de Fé</p>
          <p>Será un momento íntimo y especial en el que uniremos nuestras vidas ante Dios y nuestras familias. Nos hará muy felices sentir su abrazo y sus oraciones cuando digamos <b>“sí, acepto”</b>.</p>
          <div class="center">
            <a class="btn" id="ceremonyMap" href="#" target="_blank" rel="noopener">Ver mapa</a>
          </div>
        </article>

        <article class="card reveal delay-2">
          <h2 class="title">Recepción</h2>
          <p class="subtitle">20:00 · Lugar por confirmar</p>
          <p>Después de la ceremonia, celebremos bailando y brindando por el amor.</p>
          <p><b>No niños</b><br>Amamos a los niños, pero hemos reservado sitios solo para adultos. <em>Niños, dulces sueños.</em></p>
          <div class="center">
            <a class="btn" id="receptionMap" href="#" target="_blank" rel="noopener">Ver mapa</a>
          </div>
        </article>
      </div>
    </section>

    <!-- CÓDIGO DE VESTIMENTA / ITINERARIO -->
    <section class="section two-col">
      <article class="card reveal delay-1">
        <h2 class="title">Código de vestimenta</h2>

        <p class="subtitle" style="font-weight:700;margin-bottom:6px">Formal</p>

        <p><b>Hombres:</b> de traje · evitar azul claro.</p>

        <p><b>Mujeres:</b> de vestido largo · evitar vestidos rojo, beige, plateado, crema y gris.</p>

        <p>Reservamos el blanco para la novia.</p>
      </article>

      <article class="card reveal delay-2">
        <h2 class="title">Itinerario</h2>
        <div class="timeline">
          <div class="t-item"><span class="t-dot"></span><b>16:00</b> – Ceremonia</div>
          <div class="t-item"><span class="t-dot"></span><b>19:30</b> – Traslado y fotos</div>
          <div class="t-item"><span class="t-dot"></span><b>20:00</b> – Recepción</div>
          <div class="t-item"><span class="t-dot"></span><b>21:00</b> – Cena</div>
          <div class="t-item"><span class="t-dot"></span><b>23:30</b> – Baile</div>
        </div>
      </article>
    </section>

    <!-- MESA DE REGALOS / FOTOS -->
    <section class="section two-col">
      <article class="card reveal delay-1">
        <h2 class="title">Mesa de regalos</h2>
        <p>Tu presencia es nuestro mejor regalo. Para quienes deseen acompañarnos también con un detalle, hemos preparado una lista de artículos de hogar. Si lo prefieren, pueden hacerlo con sobre cerrado. ¡Gracias por su cariño!</p>

        <div style="display:flex;gap:12px;flex-wrap:wrap">
          <button id="openGifts" class="btn">Ver lista de regalos</button>
          <button id="openBank" class="btn ghost">Ver datos para transferencia</button>
        </div>
      </article>

      <article class="card reveal delay-2">
        <h2 class="title">Comparte tus fotografías</h2>
        <p>Ayúdanos a guardar los recuerdos más lindos del gran día. Sube tus fotos y videos al enlace, ¡nos encantará verlos!</p>
        <a class="btn" id="photosLink" href="https://example.com/fotos" target="_blank" rel="noopener">Abrir carpeta de fotos</a>
      </article>
    </section>

    <!-- BOTÓN PARA MOSTRAR RSVP -->
    <section id="confirmar" class="section">
      <article class="card reveal" style="text-align:center">
        <h2 class="title">¿Nos acompañas?</h2>
        <p class="subtitle">Pulsa el botón para confirmar y abrir el formulario.</p>
        <button class="btn" id="openRSVP">Confirmar asistencia</button>
      </article>
    </section>

    <!-- RSVP (OCULTO) -->
    <section id="rsvp" class="section hidden">
      <article class="card">
        <h2 class="title">Confirmar asistencia</h2>
        <p class="subtitle">Completa el formulario. Recibirás un correo con tu confirmación.</p>
        <form id="rsvpForm">
          <div class="two-col">
            <div>
              <label>Nombre completo</label>
              <input name="name" id="name" required />
            </div>
            <div>
              <label>Email</label>
              <input type="email" name="email" id="email" required />
            </div>
          </div>
          <div class="two-col">
            <div>
              <label>Teléfono</label>
              <input name="phone" id="phone" />
            </div>
            <div>
              <label>Número de acompañantes</label>
              <select name="guests" id="guests">
                <option value="0">Sólo yo</option>
                <option value="1">+1 invitado</option>
                <option value="2">+2 invitados</option>
                <option value="3">+3 invitados</option>
                <option value="4">+4 invitados</option>
              </select>
              <small class="subtitle">Límite permitido: <span id="guestLimitLabel">0</span></small>
            </div>
          </div>

          <div class="two-col">
            <div>
              <label>¿Asistirás?</label>
              <select name="attending" id="attending" required>
                <option value="Sí">Sí</option>
                <option value="No">No</option>
                <option value="Quizá">Quizá</option>
              </select>
            </div>
            <div>
              <label>Preferencias alimentarias</label>
              <input name="diet" id="diet" placeholder="Vegetariano, alergias, etc." />
            </div>
          </div>

          <div id="guestNamesWrap">
            <label>Nombres de acompañantes</label>
            <textarea name="guestNames" id="guestNames" placeholder="Ej.: Juan Pérez; María Gómez"></textarea>
          </div>

          <label>Mensaje</label>
          <textarea name="message" id="message" placeholder="Déjanos unas palabras…"></textarea>

          <input type="hidden" name="invitee" id="invitee" />
          <input type="hidden" name="code" id="code" />

          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
            <button class="btn" type="submit">Enviar confirmación</button>
            <button class="btn ghost" type="reset">Limpiar</button>
          </div>
          <p id="formMsg" style="margin-top:14px"></p>
        </form>
      </article>
    </section>

    <footer class="reveal">
      Con amor, <b>Nicole Stefanie & Javier Adrián</b> • 15 mayo 2026
    </footer>
  </div>

  <!-- MÚSICA -->
  <audio id="music" preload="auto" loop playsinline>
    <!-- Tu archivo nuevo -->
    <source src="./music/die-with-a-smile.m4a" type="audio/mp4">
    <!-- fallback anterior por si lo mantienes -->
    <source src="./music/tema.mp3" type="audio/mpeg">
  </audio>
  <button id="musicBtn" class="music-btn" aria-label="Reproducir música">♪</button>

  <!-- Modales -->
  <div id="giftsModal" class="modal" aria-hidden="true">
    <div class="modal-card">
      <div class="modal-head">
        <div class="modal-title">Lista de regalos</div>
        <button class="modal-close" data-close="giftsModal">&times;</button>
      </div>
      <div id="giftsBody" class="gift-list">
        <!-- items -->
      </div>
    </div>
  </div>

  <div id="bankModal" class="modal" aria-hidden="true">
    <div class="modal-card">
      <div class="modal-head">
        <div class="modal-title">Datos para transferencias</div>
        <button class="modal-close" data-close="bankModal">&times;</button>
      </div>
      <div>
        <div style="border:1px solid #eee;border-radius:12px;padding:12px;white-space:pre-wrap;line-height:1.6">
Banco Guayaquil
Cuenta de Ahorros #3782519

Produbanco
Cuenta de Ahorros #20000521092

Banco de Pichincha
Cuenta Corriente #2100271621

Nombre: Javier Adrián Tobar Hanze
Cédula: 0940960370
Correo: adriantobar97@gmail.com
Celular: 0999170015
        </div>
      </div>
    </div>
  </div>

  <script>
    // ===== Config =====
    const WEDDING = {
      couple: { bride: "Nicole Stefanie Benalcazar García", groom: "Javier Adrián Tobar Hanze" },
      dateISO: "2026-05-15T16:00:00-05:00",

      ceremonyMap: "https://maps.google.com/?q=Iglesia%20Casa%20de%20F%C3%A9",
      receptionMap: "#",

      // Enlace público para ver/subir fotos
      photosFolder: "https://example.com/fotos",

      // CSV público con los regalos (col: ID,Name,Image,Link,ReservedBy,reservedEmail,reservedAt)
      // Pon tu CSV publicado (Archivo > Compartir > Publicar en la web > CSV)
      giftsCSV: "YOUR_GIFTS_CSV",

      // Tu Apps Script publicado (Implementar > App web > Todo el mundo)
      rsvpEndpoint: "YOUR_GOOGLE_APPS_SCRIPT_WEB_APP_URL",

      defaultGuestLimit: 0
    };

    // Personalización por query (?to=Nombre&code=XYZ&limit=2)
    const params = new URLSearchParams(location.search);
    const to = params.get('to'); const code = params.get('code');
    const limitFromQS = Number(params.get('limit'));
    if (to) {
      document.getElementById('greeting').textContent = `Para: ${to}`;
      document.getElementById('name').value = to;
      document.getElementById('invitee').value = to;
    }
    if (code) document.getElementById('code').value = code;

    // ===== Countdown =====
    const dEl = document.getElementById('dLeft');
    const hEl = document.getElementById('hLeft');
    const mEl = document.getElementById('mLeft');
    const sEl = document.getElementById('sLeft');
    function updateCountdown(){
      const target = new Date(WEDDING.dateISO).getTime();
      const now = Date.now();
      let diff = Math.max(0, target - now);
      const d = Math.floor(diff/86400000); diff -= d*86400000;
      const h = Math.floor(diff/3600000); diff -= h*3600000;
      const m = Math.floor(diff/60000); diff -= m*60000;
      const s = Math.floor(diff/1000);
      dEl.textContent=d; hEl.textContent=h; mEl.textContent=m; sEl.textContent=s;
    }
    setInterval(updateCountdown,1000); updateCountdown();

    // Links
    ceremonyMap.href = WEDDING.ceremonyMap;
    receptionMap.href = WEDDING.receptionMap;
    photosLink.href = WEDDING.photosFolder;

    // ===== Add-to-calendar (ICS) =====
    function buildICS(){
      const start = new Date(WEDDING.dateISO);
      const end = new Date(start.getTime() + 2*60*60*1000);
      const dt = d => d.toISOString().replace(/[-:]/g,'').split('.')[0]+'Z';
      const ics = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Boda//ES
BEGIN:VEVENT
UID:${Date.now()}@boda
DTSTAMP:${dt(new Date())}
DTSTART:${dt(start)}
DTEND:${dt(end)}
SUMMARY:Boda de ${WEDDING.couple.bride} y ${WEDDING.couple.groom}
LOCATION:Iglesia Casa de Fé
DESCRIPTION:¡Acompáñanos a celebrar!
END:VEVENT
END:VCALENDAR`;
      return 'data:text/calendar;charset=utf8,'+encodeURIComponent(ics);
    }
    addCalendar.href = buildICS();

    // ===== Animaciones al hacer scroll =====
    const io = new IntersectionObserver(entries => {
      entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('visible'); io.unobserve(e.target); } });
    }, { threshold:.12 });
    document.querySelectorAll('.reveal').forEach(el=>io.observe(el));

    // ===== Mostrar/ocultar RSVP =====
    openRSVP.addEventListener('click', ()=>{
      document.getElementById('rsvp').classList.remove('hidden');
      document.getElementById('rsvp').scrollIntoView({behavior:'smooth'});
      try{ music.play(); music.muted=false; music.volume=.55; musicBtn.classList.add('playing'); }catch{}
    });

    // ===== Música (autoplay amigable móviles) =====
    const music = document.getElementById('music');
    const musicBtn = document.getElementById('musicBtn');
    const TARGET_VOL = .55;

    function markPlayingUI(on){ musicBtn.classList.toggle('playing', !!on); }

    async function safePlayMuted() {
      try{ music.muted = true; await music.play(); markPlayingUI(true);}catch{ markPlayingUI(false); }
    }
    async function unmuteAndSetVolume() {
      try{ music.muted = false; music.volume = TARGET_VOL; if(music.paused) await music.play(); markPlayingUI(true);
        ['touchstart','click','keydown','scroll'].forEach(ev=>window.removeEventListener(ev,unmuteAndSetVolume,{passive:true}));
      }catch{}
    }
    window.addEventListener('load', safePlayMuted);
    ['touchstart','click','keydown','scroll'].forEach(ev=>window.addEventListener(ev,unmuteAndSetVolume,{passive:true}));
    musicBtn.addEventListener('click', async ()=>{
      if (music.paused){ await music.play().catch(()=>{}); music.muted=false; music.volume=TARGET_VOL; markPlayingUI(true);}
      else { music.pause(); markPlayingUI(false); }
    });

    // ===== Gifts Modal =====
    const giftsModal = document.getElementById('giftsModal');
    const giftsBody  = document.getElementById('giftsBody');
    document.getElementById('openGifts').addEventListener('click', async ()=>{
      giftsModal.classList.add('open');
      giftsBody.innerHTML = `
        <div class="gift-item"><span style="width:100%;height:42px;background:#f5f5f5;border-radius:10px"></span></div>
        <div class="gift-item"><span style="width:100%;height:42px;background:#f5f5f5;border-radius:10px"></span></div>
        <div class="gift-item"><span style="width:100%;height:42px;background:#f5f5f5;border-radius:10px"></span></div>`;
      try{
        if(!WEDDING.giftsCSV || WEDDING.giftsCSV.includes('YOUR_GIFTS_CSV')) throw new Error('CSV vacío');
        const res = await fetch(WEDDING.giftsCSV, {mode:'cors'});
        if(!res.ok) throw new Error('No se pudo leer');
        const csv = await res.text();
        const rows = csv.trim().split(/\r?\n/).slice(1).map(r=>r.split(/,(?![^"]*"(?:(?:[^"]*"){2})*[^"]*$)/));
        giftsBody.innerHTML = '';
        rows.forEach(cols=>{
          const name = (cols[1]||'').replace(/^"|"$/g,'');
          const link = (cols[3]||'').replace(/^"|"$/g,'');
          const reservedBy = (cols[4]||'').replace(/^"|"$/g,'');
          const isReserved = reservedBy && reservedBy.trim().length>0;
          const row = document.createElement('div');
          row.className='gift-item';
          row.innerHTML = `
            <div>
              <div style="font-weight:700">${name || 'Artículo'}</div>
              ${isReserved? `<small>Reservado por ${reservedBy}</small>`: `<small>Disponible</small>`}
            </div>
            <div style="display:flex;gap:8px">
              <a class="btn ghost" href="${link || '#'}" target="_blank" rel="noopener">Ver</a>
            </div>`;
          giftsBody.appendChild(row);
        });
        if(!rows.length) giftsBody.innerHTML = `<div class="err">No se pudo cargar la lista de regalos.</div>`;
      }catch{
        giftsBody.innerHTML = `<div class="err">No se pudo cargar la lista de regalos.</div>`;
      }
    });
    document.querySelectorAll('.modal-close').forEach(btn=>{
      btn.addEventListener('click', ()=>{ document.getElementById(btn.dataset.close).classList.remove('open') })
    });
    giftsModal.addEventListener('click',e=>{ if(e.target===giftsModal) giftsModal.classList.remove('open'); });

    // ===== Bank Modal =====
    const bankModal = document.getElementById('bankModal');
    document.getElementById('openBank').addEventListener('click', ()=> bankModal.classList.add('open'));
    bankModal.addEventListener('click',e=>{ if(e.target===bankModal) bankModal.classList.remove('open'); });

    // ===== Límite de invitados + invitados por nombre =====
    let guestLimit = Number.isFinite(limitFromQS) ? limitFromQS : WEDDING.defaultGuestLimit;
    document.getElementById('guestLimitLabel').textContent = guestLimit;
    const guestsSel = document.getElementById('guests');
    const guestNamesWrap = document.getElementById('guestNamesWrap');

    function toggleGuestNames(){
      const n = Number(guestsSel.value||0);
      guestNamesWrap.style.display = n>0 ? 'block' : 'none';
    }
    toggleGuestNames();
    guestsSel.addEventListener('change', toggleGuestNames);

    // ===== RSVP submit =====
    const form = document.getElementById('rsvpForm');
    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      const formMsg = document.getElementById('formMsg');
      formMsg.textContent = 'Enviando…'; formMsg.className='subtitle';

      const data = Object.fromEntries(new FormData(form).entries());
      const selectedGuests = Number(data.guests||0);
      const names = (data.guestNames||'').split(/[,;]\s*/).map(s=>s.trim()).filter(Boolean);

      if(selectedGuests>0 && names.length !== selectedGuests){
        formMsg.innerHTML = '<span class="err">Indica exactamente los nombres de tus '+selectedGuests+' acompañantes (separados por coma o punto y coma).</span>';
        return;
      }
      if(selectedGuests > guestLimit){
        formMsg.innerHTML = '<span class="err">Tu límite de acompañantes es '+guestLimit+'.</span>';
        return;
      }

      data.timestamp = new Date().toISOString();

      try{
        if(!WEDDING.rsvpEndpoint || WEDDING.rsvpEndpoint.includes('YOUR_GOOGLE_APPS_SCRIPT')){
          throw new Error('Falta configurar el endpoint');
        }
        const res = await fetch(WEDDING.rsvpEndpoint,{
          method:'POST',
          mode:'cors',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify(data)
        });
        if(!res.ok) throw new Error('No se pudo enviar');
        formMsg.innerHTML = '<span class="ok">¡Recibido! Te llegará un correo de confirmación pronto.</span>';
        form.reset(); toggleGuestNames();
      }catch(err){
        formMsg.innerHTML = '<span class="err">Ocurrió un error. Intenta nuevamente o contáctanos.</span>';
      }
    });
  </script>
</body>
</html>
