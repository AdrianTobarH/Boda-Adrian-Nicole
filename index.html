<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boda | Nicole Stefanie & Javier Adrián – 15 Mayo 2026</title>
  <meta name="description" content="Invitación de boda de Nicole Stefanie Benalcazar García y Javier Adrián Tobar Hanze – 15/05/2026" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --accent:#8B1E2D;        /* vino tinto */
      --accent-soft:#EBD7DC;   /* rosado claro del hero */
      --leaf:#386641;          /* verde (detalles) */
      --ink:#1F2937;           /* gris-azul texto */
      --muted:#6B7280;         /* texto secundario */
      --paper:#FAF7F2;         /* fondo */
      --radius:18px;
      --shadow:0 10px 24px rgba(0,0,0,.10);
      --ring:0 0 0 3px rgba(139,30,45,.15);
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--paper);color:var(--ink);font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Apple Color Emoji","Segoe UI Emoji";scroll-behavior:smooth}
    a{color:var(--accent);text-decoration:none}
    .container{max-width:1080px;margin:auto;padding:20px}
    .hero{display:grid;grid-template-columns:1.2fr 1fr;gap:20px;background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
    .hero-img{min-height:420px;background:linear-gradient(135deg,var(--accent-soft),#f5ede9)}
    .hero-box{padding:28px}
    .muted{color:var(--muted)}
    .names{font-family:"Playfair Display",serif;font-weight:700;letter-spacing:.02em;font-size:clamp(28px,4.4vw,46px);line-height:1.16;margin:6px 0 10px}
    .amp{font-family:"Playfair Display",serif;color:var(--accent)}
    .date{margin:.25rem 0 1rem;font-weight:700;color:var(--accent);letter-spacing:.18em}
    .counter{display:grid;grid-template-columns:repeat(4,minmax(86px,1fr));gap:10px}
    .pill{padding:14px;border-radius:14px;background:var(--paper);border:1px solid #ece7df;text-align:center}
    .pill b{display:block;font-size:22px}
    .cta-row{display:flex;flex-wrap:wrap;gap:12px;margin-top:16px}
    .btn{display:inline-block;background:var(--accent);color:#fff;border:none;border-radius:12px;padding:12px 18px;font-weight:600;box-shadow:var(--shadow);cursor:pointer}
    .btn.ghost{background:#fff;color:var(--accent);border:2px solid var(--accent);box-shadow:none}
    .section{margin:34px 0}
    .card{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);padding:22px}
    .two{display:grid;gap:18px;grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
    .title{font-family:"Playfair Display",serif;font-weight:700;font-size:26px;margin:0 0 8px}
    .subtitle{margin:0;color:var(--muted)}
    /* timeline */
    .timeline{position:relative;margin-left:14px}
    .timeline::before{content:"";position:absolute;left:8px;top:0;bottom:0;width:2px;background:linear-gradient(180deg,var(--accent),transparent)}
    .t-item{position:relative;padding-left:28px;margin:16px 0}
    .t-item::before{content:"";position:absolute;left:0;top:4px;width:16px;height:16px;border-radius:50%;background:var(--accent)}
    /* formulario */
    form label{display:block;font-weight:600;margin:12px 0 6px}
    input,select,textarea{width:100%;border:1px solid #e5e7eb;border-radius:10px;padding:12px;background:#fff}
    textarea{min-height:110px}
    .ok{color:#065f46;padding:12px 14px;background:#ecfdf5;border:1px solid #a7f3d0;border-radius:12px}
    .err{color:#9b1c1c;padding:12px 14px;background:#fef2f2;border:1px solid #fecaca;border-radius:12px}
    /* música */
    .music-btn{position:fixed;right:16px;bottom:16px;background:#fff;border:2px solid var(--accent);color:var(--accent);border-radius:999px;padding:10px 14px;box-shadow:var(--shadow);font-weight:700}
    .music-btn.playing{background:var(--accent);color:#fff}
    /* modal */
    dialog{border:none;border-radius:16px;box-shadow:var(--shadow);padding:0;max-width:720px;width:clamp(320px,90vw,720px)}
    .modal-head{display:flex;justify-content:space-between;align-items:center;padding:16px 18px;border-bottom:1px solid #eee}
    .modal-body{padding:18px}
    .chip{height:44px;border-radius:12px;border:1px solid #eee;background:#fff;display:flex;align-items:center;padding:0 12px}
    .chip + .chip{margin-top:10px}
    /* foto collage */
    .collage{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
    .collage img{display:block;width:100%;height:auto}
    /* helpers */
    .center{text-align:center}
    @media (max-width:920px){
      .hero{grid-template-columns:1fr}
      .hero-img{min-height:300px}
      .counter{grid-template-columns:repeat(2,1fr)}
      .cta-row{justify-content:space-between}
    }
  </style>
</head>
<body>
  <div class="container">

    <!-- HERO -->
    <section class="hero">
      <div class="hero-img" aria-label="Fondo artístico"></div>
      <div class="hero-box">
        <p class="muted">Queridos invitados</p>
        <h1 class="names">Nicole Stefanie <span class="amp">&</span> Javier Adrián</h1>
        <p class="subtitle">¡Nos casamos! Acompáñanos a celebrar nuestro amor.</p>
        <p class="date">15 · MAYO · 2026</p>

        <div class="counter" aria-label="Cuenta regresiva">
          <div class="pill"><b id="dLeft">0</b><small>DÍAS</small></div>
          <div class="pill"><b id="hLeft">0</b><small>HORAS</small></div>
          <div class="pill"><b id="mLeft">0</b><small>MIN</small></div>
          <div class="pill"><b id="sLeft">0</b><small>SEG</small></div>
        </div>

        <div class="pill" style="margin-top:12px;text-align:center"><b id="sOnly">0</b><small>SEG</small></div>

        <div class="cta-row">
          <a class="btn" id="addCalendar" href="#">Agregar al calendario</a>
          <a class="btn ghost" href="#confirmar">Confirmar asistencia</a>
        </div>
      </div>
    </section>

    <!-- FOTO (sube tu imagen como photos/collage.jpg) -->
    <section class="section collage">
      <img src="./photos/collage.jpg" alt="Nicole & Javier – sesión de fotos" loading="lazy">
    </section>

    <!-- CEREMONIA / RECEPCIÓN -->
    <section class="section two">
      <article class="card">
        <h2 class="title">Ceremonia</h2>
        <p class="subtitle">16:00 · Iglesia Casa de Fé</p>
        <p>Será un momento íntimo y especial en el que uniremos nuestras vidas ante Dios y nuestras familias. Nos hará muy felices sentir su abrazo y sus oraciones cuando digamos <b>“sí, acepto”</b>.</p>
        <div class="center" style="margin-top:14px">
          <a class="btn" id="ceremonyMap" href="#" target="_blank" rel="noopener">Ver mapa</a>
        </div>
      </article>
      <article class="card">
        <h2 class="title">Recepción</h2>
        <p class="subtitle">20:00 · Lugar por confirmar</p>
        <p>Después de la ceremonia, celebremos bailando y brindando por el amor.</p>
        <p><b>No niños</b><br>Amamos a los niños, pero hemos reservado sitios sólo para adultos. <em>Niños, dulces sueños.</em></p>
        <a class="btn" id="receptionMap" href="#" target="_blank" rel="noopener">Ver mapa</a>
      </article>
    </section>

    <!-- CÓDIGO DE VESTIMENTA / ITINERARIO -->
    <section class="section two">
      <article class="card">
        <h2 class="title">Código de vestimenta</h2>

        <p class="subtitle" style="margin-bottom:10px">Formal</p>

        <p><b>Hombres:</b> de traje · <em>evitar azul claro</em>.</p>
        <p><b>Mujeres:</b> de vestido largo · <em>evitar vestidos rojo, beige, plateado, crema y gris</em>.</p>
        <p>Reservamos el blanco para la novia.</p>
      </article>
      <article class="card">
        <h2 class="title">Itinerario</h2>
        <div class="timeline">
          <div class="t-item"><b>16:00</b> – Ceremonia</div>
          <div class="t-item"><b>19:30</b> – Traslado y fotos</div>
          <div class="t-item"><b>20:00</b> – Recepción</div>
          <div class="t-item"><b>21:00</b> – Cena</div>
          <div class="t-item"><b>23:30</b> – Baile</div>
        </div>
      </article>
    </section>

    <!-- MESA DE REGALOS / FOTOS -->
    <section class="section two">
      <article class="card">
        <h2 class="title">Mesa de regalos</h2>
        <p>Tu presencia es nuestro mejor regalo. Para quienes deseen acompañarnos también con un detalle, hemos preparado una lista básica de artículos del hogar. Si lo prefieren, pueden hacerlo con sobre cerrado. ¡Gracias por su cariño!</p>
        <div class="cta-row">
          <button class="btn" id="openGifts">Ver lista de regalos</button>
          <a class="btn ghost" id="openTransfer" href="#">Ver datos para transferencia</a>
        </div>
      </article>

      <article class="card">
        <h2 class="title">Comparte tus fotografías</h2>
        <p>Guarda tus recuerdos de la noche y compártelos con nosotros. Cada sonrisa suma a la historia de este día.</p>
        <a class="btn" id="photosLink" href="https://example.com/fotos" target="_blank" rel="noopener">Abrir carpeta de fotos</a>
      </article>
    </section>

    <!-- CTA mostrar RSVP -->
    <section id="confirmar" class="section">
      <article class="card center">
        <h2 class="title">¿Nos acompañas?</h2>
        <p class="subtitle">Pulsa el botón para confirmar y abrir el formulario.</p>
        <button class="btn" id="openRSVP">Confirmar asistencia</button>
      </article>
    </section>

    <!-- RSVP (oculto) -->
    <section id="rsvp" class="section" style="display:none">
      <article class="card">
        <h2 class="title">Confirmar asistencia</h2>
        <p class="subtitle">Completa el formulario. Recibirás un correo con tu confirmación.</p>
        <form id="rsvpForm">
          <div class="two">
            <div>
              <label>Nombre completo</label>
              <input name="name" id="name" required />
            </div>
            <div>
              <label>Email</label>
              <input type="email" name="email" id="email" required />
            </div>
          </div>
          <div class="two">
            <div>
              <label>Teléfono</label>
              <input name="phone" id="phone" />
            </div>
            <div>
              <label>Número de acompañantes</label>
              <select name="guests" id="guests">
                <option value="0">Sólo yo</option>
                <option value="1">1 acompañante</option>
                <option value="2">2 acompañantes</option>
                <option value="3">3 acompañantes</option>
                <option value="4">4 acompañantes</option>
              </select>
              <small class="subtitle">Límite permitido: <span id="guestLimitLabel">0</span></small>
            </div>
          </div>

          <div id="guestNamesWrap" style="display:none">
            <label>Nombres de acompañantes</label>
            <textarea name="guestNames" id="guestNames" placeholder="Ej.: Juan Pérez; María Gómez"></textarea>
          </div>

          <div class="two">
            <div>
              <label>¿Asistirás?</label>
              <select name="attending" id="attending" required>
                <option value="Sí">Sí</option>
                <option value="No">No</option>
                <option value="Quizá">Quizá</option>
              </select>
            </div>
            <div>
              <label>Preferencias alimentarias</label>
              <input name="diet" id="diet" placeholder="Vegetariano, alergias, etc." />
            </div>
          </div>

          <label>Mensaje</label>
          <textarea name="message" id="message" placeholder="Déjanos unas palabras…"></textarea>

          <input type="hidden" name="invitee" id="invitee" />
          <input type="hidden" name="code" id="code" />

          <div class="cta-row" style="margin-top:12px">
            <button class="btn" type="submit">Enviar confirmación</button>
            <button class="btn ghost" type="reset">Limpiar</button>
          </div>
          <p id="formMsg" style="margin-top:14px"></p>
        </form>
      </article>
    </section>

    <footer class="center" style="margin:38px 0 28px;color:var(--muted)">
      Con amor, <b>Nicole Stefanie & Javier Adrián</b> • 15 mayo 2026
    </footer>
  </div>

  <!-- AUDIO -->
  <audio id="music" preload="auto"></audio>
  <button id="musicBtn" class="music-btn" aria-label="Reproducir música">♪</button>

  <!-- Modales -->
  <dialog id="giftDialog">
    <div class="modal-head">
      <h3 class="title" style="margin:0">Lista de regalos</h3>
      <button class="btn ghost" onclick="giftDialog.close()">✕</button>
    </div>
    <div class="modal-body">
      <div id="giftList">
        <div class="chip"></div>
        <div class="chip"></div>
        <div class="chip"></div>
        <div class="chip"></div>
      </div>
    </div>
  </dialog>

  <dialog id="transferDialog">
    <div class="modal-head">
      <h3 class="title" style="margin:0">Datos para transferencias</h3>
      <button class="btn ghost" onclick="transferDialog.close()">✕</button>
    </div>
    <div class="modal-body">
      <div class="card" style="background:#fff7f8;border:1px dashed #e4b6be">
        <pre style="white-space:pre-wrap;word-break:break-word;margin:0;font-family:inherit;line-height:1.5">
<b>Banco Guayaquil</b>
Cuenta de Ahorros #3782519

<b>Produbanco</b>
Cuenta de Ahorros #20000521092

<b>Banco de Pichincha</b>
Cuenta Corriente #2100271621

<b>Nombre:</b> Javier Adrián Tobar Hanze
<b>Cédula:</b> 0940960370
<b>Correo:</b> adriantobar97@gmail.com
<b>Celular:</b> 0999170015
        </pre>
      </div>
    </div>
  </dialog>

  <script>
    // ====== CONFIG ======
    const WEDDING = {
      couple: { bride: "Nicole Stefanie Benalcazar García", groom: "Javier Adrián Tobar Hanze" },
      dateISO: "2026-05-15T16:00:00-05:00",
      ceremonyMap: "https://maps.google.com/?q=Iglesia%20Casa%20de%20F%C3%A9",
      receptionMap: "#",
      // Si conectas Google Sheet/Apps Script, pon aquí el endpoint JSON:
      giftsEndpoint: "",  // deja vacío para usar fallback
      // Lista pública (si quieres QR más tarde):
      giftsLink: "",
      photosFolder: "https://example.com/fotos",
      // Apps Script de RSVP (el tuyo):
      rsvpEndpoint: "https://script.google.com/macros/s/AKfycbw4DVo5jW2nYQxxh_0XY7CSPAiyaEuudDJfUvYFz71njXcWFrthxHO190LEwPRsw7IDuA/exec",
      defaultGuestLimit: 0
    };

    // ====== AUDIO: usa el nombre largo exacto y encodeURI ======
    const audioFile = encodeURI("./music/Lady Gaga, Bruno Mars - Die With A Smile (Official Music Video).m4a");
    const music = document.getElementById('music');
    const musicBtn = document.getElementById('musicBtn');
    music.src = audioFile; music.loop = true;

    let triedAutoplay = false;
    function tryPlay(){ if(triedAutoplay) return; triedAutoplay = true; music.play().then(()=>{ musicBtn.classList.add('playing'); }).catch(()=>{}); }
    ['click','touchstart','scroll','keydown'].forEach(ev => window.addEventListener(ev, tryPlay, { once:true, passive:true }));
    musicBtn.addEventListener('click', ()=>{ if(music.paused){ music.play(); musicBtn.classList.add('playing'); } else { music.pause(); musicBtn.classList.remove('playing'); }});

    // ====== LINKS ======
    ceremonyMap.href = WEDDING.ceremonyMap;
    receptionMap.href = WEDDING.receptionMap;
    photosLink.href = WEDDING.photosFolder;

    // ====== COUNTDOWN ======
    const el = id => document.getElementById(id);
    function countdown(){
      const t = new Date(WEDDING.dateISO).getTime();
      const now = Date.now(); let diff = Math.max(0,t-now);
      const d = Math.floor(diff/86400000); diff -= d*86400000;
      const h = Math.floor(diff/3600000); diff -= h*3600000;
      const m = Math.floor(diff/60000); diff -= m*60000;
      const s = Math.floor(diff/1000);
      el('dLeft').textContent=d; el('hLeft').textContent=h; el('mLeft').textContent=m; el('sLeft').textContent=s; el('sOnly').textContent=s;
    }
    setInterval(countdown, 1000); countdown();

    // ====== ADD TO CALENDAR (.ics) ======
    function buildICS(){
      const start = new Date(WEDDING.dateISO);
      const end = new Date(start.getTime() + 2*60*60*1000);
      const dt = d => d.toISOString().replace(/[-:]/g,'').split('.')[0]+'Z';
      const ics = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Boda//ES
BEGIN:VEVENT
UID:${Date.now()}@boda
DTSTAMP:${dt(new Date())}
DTSTART:${dt(start)}
DTEND:${dt(end)}
SUMMARY:Boda de ${WEDDING.couple.bride} y ${WEDDING.couple.groom}
LOCATION:Iglesia Casa de Fé
DESCRIPTION:¡Acompáñanos a celebrar!
END:VEVENT
END:VCALENDAR`;
      return 'data:text/calendar;charset=utf8,'+encodeURIComponent(ics);
    }
    addCalendar.href = buildICS();

    // ====== GIFTS ======
    const giftDialog = document.getElementById('giftDialog');
    document.getElementById('openGifts').addEventListener('click', async ()=>{
      const list = document.getElementById('giftList');
      list.innerHTML = '';
      try{
        let items = [];
        if (WEDDING.giftsEndpoint){
          const res = await fetch(WEDDING.giftsEndpoint);
          items = await res.json();
        }else{
          items = [
            {id:1,name:'Lavadora',link:'https://almacenesespana.ec/producto/lavadora-automatica-digital-17-kg-diamond-gray/'},
            {id:2,name:'Secadora',link:'https://almacenesespana.ec/producto/secadora-electrica-samsung-frontal-grafito-dve24dg8000pv-ap/'},
            {id:3,name:'Televisor',link:'https://almacenesespana.ec/producto/televisor-43-uhd-google-tv-43v6c-tcl/'}
          ];
        }
        items.forEach(it=>{
          const row = document.createElement('div'); row.className='chip'; row.style.justifyContent='space-between';
          const left = document.createElement('div'); left.textContent = it.name || it;
          const right = document.createElement('div');
          if(it.link){
            const a = document.createElement('a'); a.href=it.link; a.target='_blank'; a.rel='noopener'; a.textContent='ver';
            right.appendChild(a);
          }
          row.appendChild(left); row.appendChild(right); list.appendChild(row);
        });
      }catch(e){
        const warn = document.createElement('div'); warn.className='err'; warn.textContent='No se pudo cargar la lista de regalos.';
        list.appendChild(warn);
      }
      giftDialog.showModal();
    });

    // ====== TRANSFER MODAL ======
    const transferDialog = document.getElementById('transferDialog');
    document.getElementById('openTransfer').addEventListener('click', ()=> transferDialog.showModal());

    // ====== RSVP ======
    const openBtn = document.getElementById('openRSVP');
    openBtn.addEventListener('click', ()=>{
      document.getElementById('rsvp').style.display='block';
      document.getElementById('rsvp').scrollIntoView({behavior:'smooth'});
      tryPlay();
    });

    // mostrar/ocultar nombres de acompañantes
    const guestsSel = document.getElementById('guests');
    const gWrap = document.getElementById('guestNamesWrap');
    const guestLimitLabel = document.getElementById('guestLimitLabel');
    let guestLimit = WEDDING.defaultGuestLimit;
    function toggleGuestNames(){
      const n = Number(guestsSel.value||0);
      gWrap.style.display = n>0 ? 'block' : 'none';
    }
    guestsSel.addEventListener('change', toggleGuestNames); toggleGuestNames();
    guestLimitLabel.textContent = guestLimit;

    // completar por querystring
    const params = new URLSearchParams(location.search);
    const to = params.get('to'); const code = params.get('code');
    if (to) { document.getElementById('name').value = to; document.getElementById('invitee').value = to; }
    if (code) document.getElementById('code').value = code;

    // enviar RSVP
    const form = document.getElementById('rsvpForm');
    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      formMsg.textContent = 'Enviando…'; formMsg.className='subtitle';
      const data = Object.fromEntries(new FormData(form).entries());
      const selectedGuests = Number(data.guests||0);
      // validar nombres de acompañantes
      const names = (data.guestNames||'').split(/[,;]\s*/).map(s=>s.trim()).filter(Boolean);
      if(selectedGuests>0 && names.length!==selectedGuests){
        formMsg.innerHTML = '<span class="err">Indica exactamente los nombres de tus '+selectedGuests+' acompañantes (separados por coma o punto y coma).</span>';
        return;
      }
      if(selectedGuests > guestLimit){
        formMsg.innerHTML = '<span class="err">Tu límite de acompañantes es '+guestLimit+'.</span>'; return;
      }
      data.timestamp = new Date().toISOString();
      try{
        const res = await fetch(WEDDING.rsvpEndpoint,{
          method:'POST',mode:'cors',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)
        });
        if(!res.ok) throw new Error('error');
        formMsg.innerHTML = '<span class="ok">¡Recibido! Te llegará un correo de confirmación pronto.</span>';
        form.reset(); toggleGuestNames();
      }catch(err){
        formMsg.innerHTML = '<span class="err">Ocurrió un error. Intenta nuevamente o contáctanos.</span>';
      }
    });
  </script>
</body>
</html>
