<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Boda | Javier Adrián & Nicole Stefanie – 15 Mayo 2026</title>
  <meta name="description" content="Invitación de boda de Javier Adrián Tobar Hanze y Nicole Stefanie Benalcazar García – 15/05/2026" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500;700&family=Great+Vibes&display=swap" rel="stylesheet">
  <style>
    :root{
      --accent:#8B1E2D; /* vino tinto */
      --accent-2:#E6B8B8; /* rosado suave */
      --leaf:#386641; /* verde */
      --ink:#1F2937;  /* gris-azul texto */
      --paper:#FAF7F2; /* fondo papel */
      --shadow: 0 10px 24px rgba(0,0,0,.12);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--paper);color:var(--ink);font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Arial,"Apple Color Emoji","Segoe UI Emoji";scroll-behavior:smooth}
    a{color:var(--accent)}
    .container{max-width:960px;margin:auto;padding:20px}
    header.hero{position:relative;overflow:hidden;border-radius:var(--radius);box-shadow:var(--shadow);background:#fff}
    .hero-grid{display:grid;grid-template-columns:1.2fr 1fr}
    .hero-img{min-height:440px;background:linear-gradient(135deg,#f8e9ec,#f4efe9)}
    .hero-content{padding:28px 28px 34px}
    .names{font-family:"Playfair Display",serif;font-weight:700;letter-spacing:.02em;font-size:clamp(28px,4vw,42px)}
    .amp{font-family:"Great Vibes",cursive;color:var(--accent);font-size:clamp(36px,6vw,64px);line-height:.9;display:inline-block;margin:0 .25em}
    .date{margin-top:6px;font-weight:600;color:var(--accent);letter-spacing:.18em}
    .countdown{display:flex;gap:10px;margin-top:18px}
    .pill{flex:1;text-align:center;background:var(--paper);border:1px solid #ece7df;border-radius:14px;padding:12px 8px}
    .pill b{display:block;font-size:22px}

    .section{margin:34px 0}
    .card{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);padding:22px}
    .two-col{display:grid;gap:18px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr))}

    .title{font-family:"Playfair Display",serif;font-weight:700;font-size:26px;margin:0 0 8px}
    .subtitle{margin:0;color:#6b7280}

    .btn{display:inline-block;background:var(--accent);color:#fff;border:none;border-radius:12px;padding:12px 18px;font-weight:600;cursor:pointer;text-decoration:none}
    .btn.ghost{background:#fff;color:var(--accent);border:2px solid var(--accent)}

    .timeline{position:relative;margin-left:14px}
    .timeline::before{content:"";position:absolute;left:8px;top:0;bottom:0;width:2px;background:linear-gradient(180deg,var(--accent),transparent)}
    .t-item{position:relative;padding-left:28px;margin:16px 0}
    .t-dot{position:absolute;left:0;top:4px;width:16px;height:16px;border-radius:50%;background:var(--accent)}

    .gallery{display:grid;gap:10px;grid-template-columns:repeat(auto-fill,minmax(160px,1fr))}
    .gallery img{width:100%;height:160px;object-fit:cover;border-radius:12px}

    form label{display:block;font-weight:600;margin:12px 0 6px}
    input,select,textarea{width:100%;border:1px solid #e5e7eb;border-radius:10px;padding:12px;background:#fff}
    textarea{min-height:110px}
    .ok{color:#065f46;padding:12px 14px;background:#ecfdf5;border:1px solid #a7f3d0;border-radius:12px}
    .err{color:#9b1c1c;padding:12px 14px;background:#fef2f2;border:1px solid #fecaca;border-radius:12px}

    footer{margin:36px 0 28px;text-align:center;color:#6b7280}

    /* ===== Animaciones al hacer scroll ===== */
    .reveal{opacity:0;transform:translateY(24px);transition:opacity .8s ease, transform .8s ease}
    .reveal.visible{opacity:1;transform:translateY(0)}
    .delay-1{transition-delay:.1s}
    .delay-2{transition-delay:.2s}
    .delay-3{transition-delay:.3s}

    /* RSVP oculto inicialmente */
    .hidden{display:none}

    /* Botón de música flotante */
    .music-btn{position:fixed;right:16px;bottom:16px;background:#fff;border:2px solid var(--accent);color:var(--accent);border-radius:999px;padding:10px 14px;box-shadow:var(--shadow);font-weight:700}
    .music-btn.playing{background:var(--accent);color:#fff}

    @media (max-width:860px){
      .hero-grid{grid-template-columns:1fr}
      .hero-img{min-height:320px}
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- HERO -->
    <header class="hero reveal">
      <div class="hero-grid">
        <div class="hero-img" aria-label="Fondo artístico"></div>
        <div class="hero-content">
          <p class="subtitle" id="greeting">Queridos invitados</p>
          <h1 class="names">Javier Adrián <span class=\"amp\">&</span> Nicole Stephanie</h1>
          <p class="subtitle">¡Nos casamos! Acompáñanos a celebrar nuestro amor.</p>
          <p class="date">15 · MAYO · 2026</p>

          <!-- Countdown -->
          <div class="countdown">
            <div class="pill"><b id="dLeft">0</b><small>DÍAS</small></div>
            <div class="pill"><b id="hLeft">0</b><small>HORAS</small></div>
            <div class="pill"><b id="mLeft">0</b><small>MIN</small></div>
            <div class="pill"><b id="sLeft">0</b><small>SEG</small></div>
          </div>

          <div style="margin-top:16px;display:flex;gap:10px;flex-wrap:wrap">
            <a class="btn" id="addCalendar" href="#">Agregar al calendario</a>
            <a class="btn ghost" href="#confirmar">Confirmar asistencia</a>
          </div>
        </div>
      </div>
    </header>

    <!-- CEREMONIA / RECEPCIÓN -->
    <section class="section">
      <div class="two-col">
        <article class="card reveal delay-1">
          <h2 class="title">Ceremonia</h2>
          <p class="subtitle">16:00 · Iglesia Casa de Fé</p>
          <p>Comparte con nosotros la ceremonia religiosa donde diremos “sí, acepto”.</p>
          <a class="btn" id="ceremonyMap" href="#" target="_blank" rel="noopener">Ver mapa</a>
        </article>
        <article class="card reveal delay-2">
          <h2 class="title">Recepción</h2>
          <p class="subtitle">20:00 · Lugar por confirmar</p>
          <p>Después de la ceremonia, celebremos bailando y brindando por el amor.</p>
          <a class="btn" id="receptionMap" href="#" target="_blank" rel="noopener">Ver mapa</a>
        </article>
      </div>
    </section>

    <!-- CÓDIGO DE VESTIMENTA / ITINERARIO -->
    <section class="section two-col">
      <article class="card reveal delay-1">
        <h2 class="title">Código de vestimenta</h2>
        <p><strong>Formal</strong>: Mujeres de largo · Hombres de traje. Reservamos el blanco para la novia.
<br><small><em>Mujeres</em>: evitar rojo, beige, plateado, crema y gris. <em>Hombres</em>: evitar azul claro.</small></p>
      </article>
      <article class="card reveal delay-2">
        <h2 class="title">Itinerario</h2>
        <div class="timeline">
          <div class="t-item"><span class="t-dot"></span><b>16:00</b> – Ceremonia</div>
          <div class="t-item"><span class="t-dot"></span><b>19:30</b> – Traslado y fotos</div>
          <div class="t-item"><span class="t-dot"></span><b>20:00</b> – Recepción</div>
          <div class="t-item"><span class="t-dot"></span><b>21:00</b> – Cena</div>
          <div class="t-item"><span class="t-dot"></span><b>23:30</b> – Baile</div>
        </div>
      </article>
    </section>

    <!-- MESA DE REGALOS / FOTOS (enlazables luego) -->
    <section class="section two-col">
      <article class="card reveal delay-1">
        <h2 class="title">Mesa de regalos</h2>
        <p>Tu presencia es nuestro mejor regalo.</p>
        <div style="display:flex;gap:10px;flex-wrap:wrap">
          <a class="btn" href="#" id="gift1" target="_blank" rel="noopener">Lista 1</a>
          <a class="btn ghost" href="#" id="gift2" target="_blank" rel="noopener">Lista 2</a>
        </div>
      </article>
      <article class="card reveal delay-2">
        <h2 class="title">Comparte tus fotografías</h2>
        <p>Abre el enlace para subir tus fotos del evento.</p>
        <a class="btn" id="photosLink" href="https://example.com/fotos" target="_blank" rel="noopener">Abrir carpeta de fotos</a>
        <p class="subtitle">(Luego reemplaza el enlace por tu carpeta real)</p>
      </article>
    </section>

    <!-- BOTÓN PARA MOSTRAR RSVP -->
    <section id="confirmar" class="section">
      <article class="card reveal" style="text-align:center">
        <h2 class="title">¿Nos acompañas?</h2>
        <p class="subtitle">Pulsa el botón para confirmar y abrir el formulario.</p>
        <button class="btn" id="openRSVP">Confirmar asistencia</button>
      </article>
    </section>

    <!-- RSVP (OCULTO) -->
    <section id="rsvp" class="section hidden">
      <article class="card">
        <h2 class="title">Confirmar asistencia</h2>
        <p class="subtitle">Completa el formulario. Recibirás un correo con tu confirmación.</p>
        <form id="rsvpForm">
          <div class="two-col">
            <div>
              <label>Nombre completo</label>
              <input name="name" id="name" required />
            </div>
            <div>
              <label>Email</label>
              <input type="email" name="email" id="email" required />
            </div>
          </div>
          <div class="two-col">
            <div>
              <label>Teléfono</label>
              <input name="phone" id="phone" />
            </div>
            <div>
              <label>Número de acompañantes</label>
              <select name=\"guests\" id=\"guests\">
                <option value=\"0\">Sólo yo<\/option>
              <\/select>
              <small class=\"subtitle\">Límite permitido: <span id=\"guestLimitLabel\">0<\/span><\/small>
            </div>
          </div>
          <div class="two-col">
            <div>
              <label>¿Asistirás?</label>
              <select name="attending" id="attending" required>
                <option value="Sí">Sí</option>
                <option value="No">No</option>
                <option value="Quizá">Quizá</option>
              </select>
            </div>
            <div>
              <label>Preferencias alimentarias</label>
              <input name="diet" id="diet" placeholder="Vegetariano, alergias, etc." />
            </div>
          </div>
          <label>Nombres de acompañantes<\/label>
          <textarea name=\"guestNames\" id=\"guestNames\" placeholder=\"Ej.: Juan Pérez; María Gómez\"><\/textarea>

          <label>Mensaje<\/label>
          <textarea name="message" id="message" placeholder="Déjanos unas palabras…"></textarea>

          <input type="hidden" name="invitee" id="invitee" />
          <input type="hidden" name="code" id="code" />

          <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:12px">
            <button class="btn" type="submit">Enviar confirmación</button>
            <button class="btn ghost" type="reset">Limpiar</button>
          </div>
          <p id="formMsg" style="margin-top:14px"></p>
        </form>
      </article>
    </section>

    <footer class="reveal">
      Con amor, <b>Javier Adrián & Nicole</b> • 15 mayo 2026
    </footer>
  </div>

  <!-- MÚSICA -->
  <audio id="music" preload="auto" src="./music/tema.mp3"></audio>
  <button id="musicBtn" class="music-btn" aria-label="Reproducir música">♪</button>

  <script>
    // ====== CONFIG ======
    const WEDDING = {
      couple: { groom: "Javier Adrián Tobar Hanze", bride: "Nicole Stephanie Benalcazar García" },
      dateISO: "2026-05-15T16:00:00-05:00",
      ceremonyMap: "https://maps.google.com/?q=Iglesia%20Casa%20de%20F%C3%A9",
      receptionMap: "#",
      giftLinks: ["#", "#"],
      photosFolder: "https://example.com/fotos",
      rsvpEndpoint: "YOUR_GOOGLE_APPS_SCRIPT_WEB_APP_URL",
      defaultGuestLimit: 0
    };

    // Personalización por querystring (?to=Nombre&code=XYZ)
    const params = new URLSearchParams(location.search);
    const to = params.get('to');
    const code = params.get('code');
    if (to) {
      document.getElementById('greeting').textContent = `Para: ${to}`;
      document.getElementById('name').value = to;
      document.getElementById('invitee').value = to;
    }
    if (code) document.getElementById('code').value = code;

    // ===== Countdown seguro (sin IDs globales) =====
    const dEl = document.getElementById('dLeft');
    const hEl = document.getElementById('hLeft');
    const mEl = document.getElementById('mLeft');
    const sEl = document.getElementById('sLeft');
    function updateCountdown(){
      const target = new Date(WEDDING.dateISO).getTime();
      const now = Date.now();
      let diff = Math.max(0, target - now);
      const d = Math.floor(diff/86400000); diff -= d*86400000;
      const h = Math.floor(diff/3600000); diff -= h*3600000;
      const m = Math.floor(diff/60000); diff -= m*60000;
      const s = Math.floor(diff/1000);
      if(dEl){dEl.textContent=d} if(hEl){hEl.textContent=h} if(mEl){mEl.textContent=m} if(sEl){sEl.textContent=s}
    }
    setInterval(updateCountdown,1000); updateCountdown();

    // Maps & links
    ceremonyMap.href = WEDDING.ceremonyMap;
    receptionMap.href = WEDDING.receptionMap;
    gift1.href = WEDDING.giftLinks[0];
    gift2.href = WEDDING.giftLinks[1];
    photosLink.href = WEDDING.photosFolder;

    // Add-to-calendar (.ics generado al vuelo)
    function buildICS(){
      const start = new Date(WEDDING.dateISO);
      const end = new Date(start.getTime() + 2*60*60*1000);
      const dt = d => d.toISOString().replace(/[-:]/g,'').split('.')[0]+'Z';
      const ics = `BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//Boda//ES
BEGIN:VEVENT
UID:${Date.now()}@boda
DTSTAMP:${dt(new Date())}
DTSTART:${dt(start)}
DTEND:${dt(end)}
SUMMARY:Boda de ${WEDDING.couple.groom} y ${WEDDING.couple.bride}
LOCATION:Iglesia Casa de Fé
DESCRIPTION:¡Acompáñanos a celebrar!
END:VEVENT
END:VCALENDAR`;
      return 'data:text/calendar;charset=utf8,'+encodeURIComponent(ics);
    }
    addCalendar.href = buildICS();

    // ==== Animaciones al hacer scroll (IntersectionObserver) ====
    const io = new IntersectionObserver(entries => {
      entries.forEach(e=>{
        if(e.isIntersecting){ e.target.classList.add('visible'); io.unobserve(e.target); }
      })
    }, { root:null, rootMargin:'0px', threshold:0.05 }); io.unobserve(e.target); }
      })
    }, { threshold:.15 });
    document.querySelectorAll('.reveal').forEach(el=>io.observe(el));
    // Fallback: si algo rompe JS antes de observer, muestra el hero
    document.querySelector('header.hero')?.classList.add('visible');

    // ==== Mostrar/ocultar RSVP ====
    const openBtn = document.getElementById('openRSVP');
    openBtn.addEventListener('click', ()=>{
      document.getElementById('rsvp').classList.remove('hidden');
      document.getElementById('rsvp').scrollIntoView({behavior:'smooth'});
      // Reproducir música al primer gesto del usuario (requisito móvil)
      try{ music.play(); musicBtn.classList.add('playing'); }catch{ /* silencioso */ }
    });

    // ==== Música ====
    const music = document.getElementById('music');
    if(music){ music.loop = true; }
    const musicBtn = document.getElementById('musicBtn');
    musicBtn.addEventListener('click', ()=>{
      if(music.paused){ music.play(); musicBtn.classList.add('playing'); }
      else{ music.pause(); musicBtn.classList.remove('playing'); }
    });

    // RSVP submit
    const form = document.getElementById('rsvpForm');
    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      formMsg.textContent = 'Enviando…'; formMsg.className='subtitle';
      const data = Object.fromEntries(new FormData(form).entries());
      // Validación de acompañantes
      const selectedGuests = Number(data.guests||0);
      const names = (data.guestNames||'').split(/[,;
]+/).map(s=>s.trim()).filter(Boolean);
      if(selectedGuests>0 && names.length !== selectedGuests){
        formMsg.innerHTML = '<span class="err">Indica exactamente los nombres de tus '+selectedGuests+' acompañantes (separados por coma o punto y coma).</span>';
        return;
      }
      if(selectedGuests > (typeof guestLimit!=='undefined'?guestLimit:0)){
        formMsg.innerHTML = '<span class="err">Tu límite de acompañantes es '+guestLimit+'.</span>';
        return;
      }
      data.timestamp = new Date().toISOString();
      try{
        const res = await fetch(WEDDING.rsvpEndpoint,{
          method:'POST',
          mode:'cors',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify(data)
        });
        if(!res.ok) throw new Error('No se pudo enviar');
        formMsg.innerHTML = '<span class="ok">¡Recibido! Te llegará un correo de confirmación pronto.</span>';
        form.reset();
      }catch(err){
        formMsg.innerHTML = '<span class="err">Ocurrió un error. Intenta nuevamente o contáctanos.</span>';
      }
    });
  </script>
</body>
</html>
